import{j as c}from"./jsx-runtime-AgcCsxC8.js";import{r as y,R as v}from"./index-XiNr8FW2.js";import{c as A}from"./index-bittVVcR.js";import{_ as Z,a as re}from"./inheritsLoose-9tIPpNWa.js";import{R as O}from"./index-9vG4XYWr.js";import{I as ie}from"./icon-yOqsyJxJ.js";import"./_commonjsHelpers-5-cIlDoe.js";import"./index-iqSuTeQG.js";import"./index-hnMjDxAq.js";const L=y.createContext({index:"0"}),g=a=>{const{className:o,mode:u,style:n,children:t,defaultIndex:e,onSelect:r,defaultOpenSubMenus:s}=a,[i,l]=y.useState(e),d=A("viking-menu",o,{"menu-vertical":u==="vertical","menu-horizontal":u!=="vertical"}),f={index:i||"0",onSelect:N=>{l(N),r&&r(N)},mode:u,defaultOpenSubMenus:s},M=()=>v.Children.map(t,(N,V)=>{const j=N,{displayName:h}=j.type;if(h==="MenuItem"||h==="SubMenu")return v.cloneElement(j,{index:V.toString()});console.error("Warning: Menu has a child which is not a MenuItem component")});return c.jsx("ul",{className:d,style:n,"data-testid":"test-menu",children:c.jsx(L.Provider,{value:f,children:M()})})};g.defaultProps={defaultIndex:"0",mode:"horizontal",defaultOpenSubMenus:[]};try{g.displayName="Menu",g.__docgenInfo={description:`为网站提供导航功能的菜单。支持横向纵向两种模式，支持下拉菜单。
### 引用方法

~~~js
import { Menu } from 'vikingship'

//然后可以使用 Menu.Item 和 Menu.Submenu 访问选项和子下拉菜单组件
~~~`,displayName:"Menu",props:{defaultIndex:{defaultValue:{value:"0"},description:"默认选中",name:"defaultIndex",required:!1,type:{name:"string"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},mode:{defaultValue:{value:"horizontal"},description:"",name:"mode",required:!1,type:{name:"enum",value:[{value:'"horizontal"'},{value:'"vertical"'}]}},style:{defaultValue:null,description:"",name:"style",required:!1,type:{name:"CSSProperties"}},onSelect:{defaultValue:null,description:"",name:"onSelect",required:!1,type:{name:"selectedCallback"}},children:{defaultValue:null,description:"只能放 MenuItem 或者 SubMenu",name:"children",required:!1,type:{name:"ReactNode"}},defaultOpenSubMenus:{defaultValue:{value:"[]"},description:"默认展开",name:"defaultOpenSubMenus",required:!1,type:{name:"string[]"}}}}}catch{}const p=a=>{const{index:o,disabled:u,className:n,style:t,children:e}=a,r=y.useContext(L),s=A("menu-item",n,{"is-disabled":u,"is-active":r.index===o}),i=()=>{r.onSelect&&!u&&typeof o=="string"&&r.onSelect(o)};return c.jsx("li",{className:s,style:t,onClick:i,children:e})};p.displayName="MenuItem";try{p.displayName="MenuItem",p.__docgenInfo={description:"",displayName:"MenuItem",props:{index:{defaultValue:null,description:"",name:"index",required:!1,type:{name:"string"}},disabled:{defaultValue:null,description:"",name:"disabled",required:!1,type:{name:"boolean"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},style:{defaultValue:null,description:"",name:"style",required:!1,type:{name:"CSSProperties"}}}}}catch{}function ee(a,o){if(a==null)return{};var u={},n=Object.keys(a),t,e;for(e=0;e<n.length;e++)t=n[e],!(o.indexOf(t)>=0)&&(u[t]=a[t]);return u}function oe(a,o){return a.classList?!!o&&a.classList.contains(o):(" "+(a.className.baseVal||a.className)+" ").indexOf(" "+o+" ")!==-1}function le(a,o){a.classList?a.classList.add(o):oe(a,o)||(typeof a.className=="string"?a.className=a.className+" "+o:a.setAttribute("class",(a.className&&a.className.baseVal||"")+" "+o))}function B(a,o){return a.replace(new RegExp("(^|\\s)"+o+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}function ue(a,o){a.classList?a.classList.remove(o):typeof a.className=="string"?a.className=B(a.className,o):a.setAttribute("class",B(a.className&&a.className.baseVal||"",o))}const z={disabled:!1},ne=v.createContext(null);var te=function(o){return o.scrollTop},_="unmounted",E="exited",C="entering",b="entered",q="exiting",x=function(a){Z(o,a);function o(n,t){var e;e=a.call(this,n,t)||this;var r=t,s=r&&!r.isMounting?n.enter:n.appear,i;return e.appearStatus=null,n.in?s?(i=E,e.appearStatus=C):i=b:n.unmountOnExit||n.mountOnEnter?i=_:i=E,e.state={status:i},e.nextCallback=null,e}o.getDerivedStateFromProps=function(t,e){var r=t.in;return r&&e.status===_?{status:E}:null};var u=o.prototype;return u.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},u.componentDidUpdate=function(t){var e=null;if(t!==this.props){var r=this.state.status;this.props.in?r!==C&&r!==b&&(e=C):(r===C||r===b)&&(e=q)}this.updateStatus(!1,e)},u.componentWillUnmount=function(){this.cancelNextCallback()},u.getTimeouts=function(){var t=this.props.timeout,e,r,s;return e=r=s=t,t!=null&&typeof t!="number"&&(e=t.exit,r=t.enter,s=t.appear!==void 0?t.appear:r),{exit:e,enter:r,appear:s}},u.updateStatus=function(t,e){if(t===void 0&&(t=!1),e!==null)if(this.cancelNextCallback(),e===C){if(this.props.unmountOnExit||this.props.mountOnEnter){var r=this.props.nodeRef?this.props.nodeRef.current:O.findDOMNode(this);r&&te(r)}this.performEnter(t)}else this.performExit();else this.props.unmountOnExit&&this.state.status===E&&this.setState({status:_})},u.performEnter=function(t){var e=this,r=this.props.enter,s=this.context?this.context.isMounting:t,i=this.props.nodeRef?[s]:[O.findDOMNode(this),s],l=i[0],d=i[1],m=this.getTimeouts(),f=s?m.appear:m.enter;if(!t&&!r||z.disabled){this.safeSetState({status:b},function(){e.props.onEntered(l)});return}this.props.onEnter(l,d),this.safeSetState({status:C},function(){e.props.onEntering(l,d),e.onTransitionEnd(f,function(){e.safeSetState({status:b},function(){e.props.onEntered(l,d)})})})},u.performExit=function(){var t=this,e=this.props.exit,r=this.getTimeouts(),s=this.props.nodeRef?void 0:O.findDOMNode(this);if(!e||z.disabled){this.safeSetState({status:E},function(){t.props.onExited(s)});return}this.props.onExit(s),this.safeSetState({status:q},function(){t.props.onExiting(s),t.onTransitionEnd(r.exit,function(){t.safeSetState({status:E},function(){t.props.onExited(s)})})})},u.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},u.safeSetState=function(t,e){e=this.setNextCallback(e),this.setState(t,e)},u.setNextCallback=function(t){var e=this,r=!0;return this.nextCallback=function(s){r&&(r=!1,e.nextCallback=null,t(s))},this.nextCallback.cancel=function(){r=!1},this.nextCallback},u.onTransitionEnd=function(t,e){this.setNextCallback(e);var r=this.props.nodeRef?this.props.nodeRef.current:O.findDOMNode(this),s=t==null&&!this.props.addEndListener;if(!r||s){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var i=this.props.nodeRef?[this.nextCallback]:[r,this.nextCallback],l=i[0],d=i[1];this.props.addEndListener(l,d)}t!=null&&setTimeout(this.nextCallback,t)},u.render=function(){var t=this.state.status;if(t===_)return null;var e=this.props,r=e.children;e.in,e.mountOnEnter,e.unmountOnExit,e.appear,e.enter,e.exit,e.timeout,e.addEndListener,e.onEnter,e.onEntering,e.onEntered,e.onExit,e.onExiting,e.onExited,e.nodeRef;var s=ee(e,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return v.createElement(ne.Provider,{value:null},typeof r=="function"?r(t,s):v.cloneElement(v.Children.only(r),s))},o}(v.Component);x.contextType=ne;x.propTypes={};function S(){}x.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:S,onEntering:S,onEntered:S,onExit:S,onExiting:S,onExited:S};x.UNMOUNTED=_;x.EXITED=E;x.ENTERING=C;x.ENTERED=b;x.EXITING=q;const ce=x;var de=function(o,u){return o&&u&&u.split(" ").forEach(function(n){return le(o,n)})},$=function(o,u){return o&&u&&u.split(" ").forEach(function(n){return ue(o,n)})},P=function(a){Z(o,a);function o(){for(var n,t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return n=a.call.apply(a,[this].concat(e))||this,n.appliedClasses={appear:{},enter:{},exit:{}},n.onEnter=function(s,i){var l=n.resolveArguments(s,i),d=l[0],m=l[1];n.removeClasses(d,"exit"),n.addClass(d,m?"appear":"enter","base"),n.props.onEnter&&n.props.onEnter(s,i)},n.onEntering=function(s,i){var l=n.resolveArguments(s,i),d=l[0],m=l[1],f=m?"appear":"enter";n.addClass(d,f,"active"),n.props.onEntering&&n.props.onEntering(s,i)},n.onEntered=function(s,i){var l=n.resolveArguments(s,i),d=l[0],m=l[1],f=m?"appear":"enter";n.removeClasses(d,f),n.addClass(d,f,"done"),n.props.onEntered&&n.props.onEntered(s,i)},n.onExit=function(s){var i=n.resolveArguments(s),l=i[0];n.removeClasses(l,"appear"),n.removeClasses(l,"enter"),n.addClass(l,"exit","base"),n.props.onExit&&n.props.onExit(s)},n.onExiting=function(s){var i=n.resolveArguments(s),l=i[0];n.addClass(l,"exit","active"),n.props.onExiting&&n.props.onExiting(s)},n.onExited=function(s){var i=n.resolveArguments(s),l=i[0];n.removeClasses(l,"exit"),n.addClass(l,"exit","done"),n.props.onExited&&n.props.onExited(s)},n.resolveArguments=function(s,i){return n.props.nodeRef?[n.props.nodeRef.current,s]:[s,i]},n.getClassNames=function(s){var i=n.props.classNames,l=typeof i=="string",d=l&&i?i+"-":"",m=l?""+d+s:i[s],f=l?m+"-active":i[s+"Active"],M=l?m+"-done":i[s+"Done"];return{baseClassName:m,activeClassName:f,doneClassName:M}},n}var u=o.prototype;return u.addClass=function(t,e,r){var s=this.getClassNames(e)[r+"ClassName"],i=this.getClassNames("enter"),l=i.doneClassName;e==="appear"&&r==="done"&&l&&(s+=" "+l),r==="active"&&t&&te(t),s&&(this.appliedClasses[e][r]=s,de(t,s))},u.removeClasses=function(t,e){var r=this.appliedClasses[e],s=r.base,i=r.active,l=r.done;this.appliedClasses[e]={},s&&$(t,s),i&&$(t,i),l&&$(t,l)},u.render=function(){var t=this.props;t.classNames;var e=ee(t,["classNames"]);return v.createElement(ce,re({},e,{onEnter:this.onEnter,onEntered:this.onEntered,onEntering:this.onEntering,onExit:this.onExit,onExiting:this.onExiting,onExited:this.onExited}))},o}(v.Component);P.defaultProps={classNames:""};P.propTypes={};const pe=P,R=a=>{const{children:o,classNames:u,animation:n,wrapper:t,...e}=a;return c.jsx(pe,{classNames:u||n,...e,children:t?c.jsx("div",{children:o}):o})};R.defaultProps={unmountOnExit:!0,appear:!0};try{R.displayName="Transition",R.__docgenInfo={description:"",displayName:"Transition",props:{classNames:{defaultValue:null,description:"The animation `classNames` applied to the component as it enters or exits.\nA single name can be provided and it will be suffixed for each stage: e.g.\n\n`classNames=\"fade\"` applies `fade-enter`, `fade-enter-active`,\n`fade-exit`, `fade-exit-active`, `fade-appear`, and `fade-appear-active`.\n\nEach individual classNames can also be specified independently like:\n\n```js\nclassNames={{\n  appear: 'my-appear',\n  appearActive: 'my-appear-active',\n  appearDone: 'my-appear-done',\n  enter: 'my-enter',\n  enterActive: 'my-enter-active',\n  enterDone: 'my-enter-done',\n  exit: 'my-exit',\n  exitActive: 'my-exit-active',\n  exitDone: 'my-exit-done'\n}}\n```",name:"classNames",required:!1,type:{name:"string | CSSTransitionClassNames"}},animation:{defaultValue:null,description:"",name:"animation",required:!1,type:{name:"enum",value:[{value:'"zoom-in-top"'},{value:'"zoom-in-right"'},{value:'"zoom-in-left"'},{value:'"zoom-in-bottom"'}]}},wrapper:{defaultValue:null,description:"",name:"wrapper",required:!1,type:{name:"boolean"}}}}}catch{}const I=({index:a,title:o,children:u,className:n})=>{const t=y.useRef(null),e=y.useContext(L),r=e.defaultOpenSubMenus,s=a&&e.mode==="vertical"?r.includes(a):!1,[i,l]=y.useState(s),d=A("menu-item submenu-item",n,{"is-active":e.index===a,"is-opened":i,"is-vertical":e.mode="vertical"}),m=h=>{h.preventDefault(),l(!i)};let f;const M=(h,F)=>{clearTimeout(f),h.preventDefault(),f=setTimeout(()=>{l(F)},300)},N=e.mode==="vertical"?{onClick:m}:{},V=e.mode!=="vertical"?{onMouseEnter:h=>{M(h,!0)},onMouseLeave:h=>{M(h,!1)}}:{},j=()=>{const h=A("viking-submenu",{"menu-opened":i}),F=v.Children.map(u,(se,ae)=>{const w=se;if(w.type.displayName==="MenuItem")return v.cloneElement(w,{index:`${a}-${ae}`});console.error("Warning: SubMenu has a child which is a not MenuItem")});return c.jsx(c.Fragment,{children:c.jsx(R,{nodeRef:t,in:i,timeout:300,classNames:"zoom-in-top",children:c.jsx("ul",{ref:t,className:h,children:F})})})};return c.jsxs("li",{className:d,...V,children:[c.jsxs("div",{className:"submenu-title",...N,children:[o,c.jsx(ie,{icon:"angle-down",className:"arrow-icon"})]}),j()]},a)};I.displayName="SubMenu";try{I.displayName="SubMenu",I.__docgenInfo={description:"",displayName:"SubMenu",props:{index:{defaultValue:null,description:"",name:"index",required:!1,type:{name:"string"}},title:{defaultValue:null,description:"",name:"title",required:!0,type:{name:"string"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}}}}}catch{}const Ne={title:"Menu",component:g,argTypes:{onSelect:{action:"selected"}},tags:["autodocs"]},k=()=>c.jsxs(g,{onSelect:function(){},children:[c.jsx(p,{children:"cool link"}),c.jsx(p,{children:"cool link 2"}),c.jsx(p,{disabled:!0,children:"disabled"}),c.jsxs(I,{title:"下拉选项",children:[c.jsx(p,{children:"下拉选项一"}),c.jsx(p,{children:"下拉选项二"})]})]});k.storyName="默认 Menu";const T=()=>c.jsxs(g,{mode:"vertical",onSelect:function(){},children:[c.jsx(p,{children:"cool link"}),c.jsx(p,{children:"cool link 2"}),c.jsxs(I,{title:"点击下拉选项",children:[c.jsx(p,{children:"下拉选项一"}),c.jsx(p,{children:"下拉选项二"})]})]});T.storyName="纵向的 Menu";const D=()=>c.jsxs(g,{defaultOpenSubMenus:["2"],mode:"vertical",onSelect:function(){},children:[c.jsx(p,{children:"cool link"}),c.jsx(p,{children:"cool link 2"}),c.jsxs(I,{title:"默认展开下拉选项",children:[c.jsx(p,{children:"下拉选项一"}),c.jsx(p,{children:"下拉选项二"})]})]});D.storyName="默认展开纵向的 Menu";var U,G,W;k.parameters={...k.parameters,docs:{...(U=k.parameters)==null?void 0:U.docs,source:{originalSource:`() => <Menu onSelect={function noRefCheck() {}}>\r
  <MenuItem>\r
    cool link\r
  </MenuItem>\r
  <MenuItem>\r
    cool link 2\r
  </MenuItem>\r
  <MenuItem disabled>\r
    disabled\r
  </MenuItem>\r
  <SubMenu title="下拉选项">\r
    <MenuItem>\r
      下拉选项一\r
    </MenuItem>\r
    <MenuItem>\r
      下拉选项二\r
    </MenuItem>\r
  </SubMenu>\r
</Menu>`,...(W=(G=k.parameters)==null?void 0:G.docs)==null?void 0:W.source}}};var X,H,K;T.parameters={...T.parameters,docs:{...(X=T.parameters)==null?void 0:X.docs,source:{originalSource:`() => <Menu mode="vertical" onSelect={function noRefCheck() {}}>\r
  <MenuItem>\r
    cool link\r
  </MenuItem>\r
  <MenuItem>\r
    cool link 2\r
  </MenuItem>\r
  <SubMenu title="点击下拉选项">\r
    <MenuItem>\r
      下拉选项一\r
    </MenuItem>\r
    <MenuItem>\r
      下拉选项二\r
    </MenuItem>\r
  </SubMenu>\r
</Menu>`,...(K=(H=T.parameters)==null?void 0:H.docs)==null?void 0:K.source}}};var J,Q,Y;D.parameters={...D.parameters,docs:{...(J=D.parameters)==null?void 0:J.docs,source:{originalSource:`() => <Menu defaultOpenSubMenus={['2']} mode="vertical" onSelect={function noRefCheck() {}}>\r
  <MenuItem>\r
    cool link\r
  </MenuItem>\r
  <MenuItem>\r
    cool link 2\r
  </MenuItem>\r
  <SubMenu title="默认展开下拉选项">\r
    <MenuItem>\r
      下拉选项一\r
    </MenuItem>\r
    <MenuItem>\r
      下拉选项二\r
    </MenuItem>\r
  </SubMenu>\r
</Menu>`,...(Y=(Q=D.parameters)==null?void 0:Q.docs)==null?void 0:Y.source}}};const Se=["DefaultMenu","VerticalCompontanrt","VerticalOpenCompontanrt"];export{k as DefaultMenu,T as VerticalCompontanrt,D as VerticalOpenCompontanrt,Se as __namedExportsOrder,Ne as default};
